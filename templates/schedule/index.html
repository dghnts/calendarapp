{% extends "common/base.html" %}
{% load static %}
{% load mathfilters %}
{% block page_title %}カレンダーアプリ{% endblock %}
{% block extra_head %}
    <link rel="stylesheet" href="{% static 'schedule/css/index.css' %}">
{% endblock %}
{% block header %}
{% endblock %}
{% block main %}
    <div class="container">
        <h2>ようこそ！{{ user }}さん</h2>
        <div class="d-flex flex-column flex-md-row p-4 gap-4 py-md-5 align-items-center justify-content-center">
            {% if not calendars %}
                <p>まだカレンダーがありません。</p>
                {% include "schedule/create_calendar.html" %}
            {% endif %}
            {% if owner_calendars %}
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title text-center">My Claendar</h5>
                    </div>
                    <div id="my_calendar_card" class="list-group">
                        {% for owner_calendar in owner_calendars %}
                            <a href="{% url 'schedule:calendar' owner_calendar.id %}" class="list-group-item list-group-item-action">
                                {{ owner_calendar.name }}
                            </a>
                        {% endfor %}
                        {% if owner_calendars.count < 5 %}
                        {% with n=5|sub:owner_calendars.count %}
                            {% with ''|center:n as range %}
                                {% for i in range %}
                                    <a class="list-group-item list-group-item disabled text-white">""</a>
                                {% endfor %}
                            {% endwith %}
                        {% endwith %}
                        {% endif %}
                    </div>
                </div>
            {% endif %}
            {% if other_calendars %}
                <div id="other_calendar_list" class="card">
                    <div class="card-header">
                        <h5 class="card-title text-center">Other Calendars</h5>
                    </div>
                    <div class="list-group">
                        {% for other_calendar in other_calendars %}
                            <a href="{% url 'schedule:calendar' other_calendar.id %}" class="list-group-item list-group-item-action">
                                {{ other_calendar.name }}
                            </a>
                        {% endfor %}     
                        {% if other_calendars.count < 5 %}
                        {% with n=5|sub:other_calendars.count %}
                            {% with ''|center:n as range %}
                                {% for i in range %}
                                    <a class="list-group-item list-group-item disabled text-white">""</a>
                                {% endfor %}
                            {% endwith %}
                        {% endwith %}
                        {% endif %}
                    </div>
                </div>
            {% endif %}
        </div>
    </div>
{% endblock %}