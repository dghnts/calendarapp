<div id="message_{{ message.id }}" class="message border">
    <div class="d-flex justify-content-between">
        <div class="p-1">
            {{ message.user }} : {{ message.dt }}
        </div>
        {% if user == message.user or user == calendar.user%}
        <button class="btn settings_button p-1" data-id="{{ message.id }}">
            <i class="bi bi-three-dots-vertical"></i>
        </button>
        <div class="settings_menu"
             data-id="{{ message.id }}"
             style="display: none">
            <ul class="list-unstyled border">
                {# チャットの削除・編集ボタンを入れる #}
                {# アンカー属性でformをpostする方法 => onclick="document.formの名前.submit() #}
                <li>
                    <a href="#"
                       class="delete_link"
                       data-id="{{ message.id }}"
                       onclick="document.delete_message_{{ message.id }}.submit()">削除</a>
                </li>
                <li>
                    <a href="#"
                       class="update_link"
                       data-id="{{ message.id }}"
                       onclick="document.update_message_{{ message.id }}">編集</a>
                </li>
            </ul>
        </div>
    {% endif %}
    </div>
    <p class="message_content">{{ message.content|linebreaksbr }}</p>
    <form action="{% url 'schedule:update_message' message.id %}" method="POST" id="update_form_{{ message.id }}" class="update_form" data-id="{{ message.id }}" style="display: none;">
        {% csrf_token %}
        <input type="text" name="content" value="{{ message.content }}"></input>
        <input class="btn" type="submit" value="保存"></input>
    </form>
</div>
